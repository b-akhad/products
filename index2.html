<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Card</title>
    <link href="style.css" rel="stylesheet" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>

   
  </head>
  <body>
  <div class="container">
    <div id="row" class="row">



    </div>
  </div>
    <script type="text/javascript">

      function getclickname(obj)
      {
        //By passing object as argument you can access all properties of that element
        alert(obj.id);
      }

      fetch('json/products.json').then(function(response) {
      response.json().then(function(json) {

        var row = document.getElementById('row');
      console.log(row);
      
      
      for(var i=0; i < json.Products.length; i++){
      
      var col = document.createElement('div');
      col.class = "col-md-4 col-6 mt-5";
      col.setAttribute("class","col-md-4 col-6 mt-5");

      row.appendChild(col);


      var card = document.createElement("div");
      card.class = "card";
      card.setAttribute("class","card");

      col.appendChild(card);

      var img = document.createElement('img');
      img.src = json.Products[i].URL;
      img.alt = json.Products[i].Caption;
      img.setAttribute("class","img-fluid p-3")

      card.appendChild(img);

      var card_body = document.createElement("div");
      card_body.setAttribute("class","card-body");

      var title = document.createElement("h5");
      title.setAttribute("class","card-title");
      title.innerText = json.Products[i].TITLE;

      var text = document.createElement("p");
      text.setAttribute("class","card-text");
      text.innerText = json.Products[i];

      card_body.appendChild(title);
      card_body.appendChild(text);

      card.appendChild(card_body);

      var card_footer = document.createElement("div");
      card_footer.setAttribute("class","card-footer");


      
      var purchase = document.createElement('button');
      purchase.innerText = "Buy now";
      purchase.onclick = doWithParam(json.Products[i].ID)
      console.log(json.Products[i].ID);
      function doWithParam( param ){
        return function(){
            alert( param ); // <-- Your code here
        }
        };

      card_footer.appendChild(purchase);

      card.appendChild(card_footer);




      };
      
      
      });
      });
      
      
         Telegram.WebApp.ready();
         purchase = document.getElementsByTagName("button");
      
         Telegram.WebApp.MainButton.setText('Choose').show().onClick(function () {
          const data = JSON.stringify({hex: colorPicker.color.hexString, rgb: colorPicker.color.rgb});
          Telegram.WebApp.sendData(data);
          Telegram.WebApp.close();
      
      });
        
      </script>
      
  </body>
</html>
